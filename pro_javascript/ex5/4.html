<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>5.4</title>
    <script type="text/javascript" src="../asserts.js"></script>
</head>
<body>
    <ul id="results"></ul>
    <script type="text/javascript">
    var outerValue = "ninja";
    var later;
    // 函数的闭包测试方法。
    function outerFunction(){
        var innerValue = "samurai";
        function innerFunction(paramValue){
            assert(outerValue,"Inner can see the ninja");
            assert(innerValue,"Inner can see the samurai");
            assert(paramValue,"Inner can see the wakizashi");
            assert(tooLate,"Inner can see the ronin");
        }
        later = innerFunction;
    }
    assert(!tooLate,"Outer can't see the ronin.");
    var tooLate = "ronin";
    outerFunction();
    later("wakizashi");
    // 闭包其实非常类似于“叠罗汉”越在里层的作用域，能够操作的作用域越多。类似于在“山顶”。
    // 并且里层函数即便是调用外层函数后定义的变量，都是完全通过了，外层函数“编译”之后的结果。
    // 外层后定义的函数在同级不能被调用的反而在内部函数中能够被正确的引用，这真是一个容易犯糊涂的地方。
    </script>
</body>
</html>